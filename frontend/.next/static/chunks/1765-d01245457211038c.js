"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1765],{34557:function(e,t,a){a.d(t,{$:function(){return c}});var n=a(69921),r=a(36826),o=a(72932),s=a(13550),i=a(89361);async function c(e,t){async function a(t){if(t.endsWith(i.ny.slice(2))){let a=(0,r.f)((0,n.p5)(t,-64,-32)),s=(0,n.p5)(t,0,-64).slice(2).match(/.{1,64}/g),c=await Promise.all(s.map(t=>i.rC.slice(2)!==t?e.request({method:"eth_getTransactionReceipt",params:[`0x${t}`]},{dedupe:!0}):void 0)),u=c.some(e=>null===e)?100:c.every(e=>e?.status==="0x1")?200:c.every(e=>e?.status==="0x0")?500:600;return{atomic:!1,chainId:(0,o.ly)(a),receipts:c.filter(Boolean),status:u,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[t]})}let{atomic:c=!1,chainId:u,receipts:l,version:d="2.0.0",...h}=await a(t.id),[f,w]=(()=>{let e=h.status;return e>=100&&e<200?["pending",e]:e>=200&&e<300?["success",e]:e>=300&&e<700?["failure",e]:"CONFIRMED"===e?["success",200]:"PENDING"===e?["pending",100]:[void 0,e]})();return{...h,atomic:c,chainId:u?(0,o.ly)(u):void 0,receipts:l?.map(e=>({...e,blockNumber:o.y_(e.blockNumber),gasUsed:o.y_(e.gasUsed),status:s.ew[e.status]}))??[],statusCode:w,status:f,version:d}}},89239:function(e,t,a){a.d(t,{x:function(){return u}});var n=a(19775),r=a(65704),o=a(93637),s=a(82645),i=a(12363),c=a(16689);async function u(e,t){let{account:a=e.account,chainId:u,nonce:l}=t;if(!a)throw new r.o({docsPath:"/docs/eip7702/prepareAuthorization"});let d=(0,n.T)(a),h=(()=>{if(t.executor)return"self"===t.executor?t.executor:(0,n.T)(t.executor)})(),f={address:t.contractAddress??t.address,chainId:u,nonce:l};return void 0===f.chainId&&(f.chainId=e.chain?.id??await (0,s.s)(e,i.L,"getChainId")({})),void 0===f.nonce&&(f.nonce=await (0,s.s)(e,c.K,"getTransactionCount")({address:d.address,blockTag:"pending"}),("self"===h||h?.address&&(0,o.E)(h.address,d.address))&&(f.nonce+=1)),f}},89361:function(e,t,a){a.d(t,{ny:function(){return h},rC:function(){return f},s_:function(){return w}});var n=a(19775),r=a(81544),o=a(77014),s=a(17283),i=a(89256),c=a(72932),u=a(59455),l=a(93606),d=a(41709);let h="0x5792579257925792579257925792579257925792579257925792579257925792",f=(0,u.eC)(0,{size:32});async function w(e,t){let{account:a=e.account,capabilities:w,chain:p=e.chain,experimental_fallback:m,experimental_fallbackDelay:v=32,forceAtomic:g=!1,id:y,version:C="2.0.0"}=t,T=a?(0,n.T)(a):null,b=t.calls.map(e=>{let t=e.abi?(0,s.R)({abi:e.abi,functionName:e.functionName,args:e.args}):e.data;return{data:e.dataSuffix&&t?(0,i.zo)([t,e.dataSuffix]):t,to:e.to,value:e.value?(0,u.eC)(e.value):void 0}});try{let t=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:g,calls:b,capabilities:w,chainId:(0,u.eC)(p.id),from:T?.address,id:y,version:C}]},{retryCount:0});if("string"==typeof t)return{id:t};return t}catch(a){if(m&&("MethodNotFoundRpcError"===a.name||"MethodNotSupportedRpcError"===a.name||"UnknownRpcError"===a.name||a.details.toLowerCase().includes("does not exist / is not available")||a.details.toLowerCase().includes("missing or invalid. request()")||a.details.toLowerCase().includes("did not match any variant of untagged enum")||a.details.toLowerCase().includes("account upgraded to unsupported contract")||a.details.toLowerCase().includes("eip-7702 not supported")||a.details.toLowerCase().includes("unsupported wc_ method")||a.details.toLowerCase().includes("feature toggled misconfigured")||a.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(w&&Object.values(w).some(e=>!e.optional)){let e="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new o.vl(new r.G(e,{details:e}))}if(g&&b.length>1){let e="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new o.r0(new r.G(e,{details:e}))}let t=[];for(let a of b){let n=(0,d.T)(e,{account:T,chain:p,data:a.data,to:a.to,value:a.value?(0,c.y_)(a.value):void 0});t.push(n),v>0&&await new Promise(e=>setTimeout(e,v))}let a=await Promise.allSettled(t);if(a.every(e=>"rejected"===e.status))throw a[0].reason;let n=a.map(e=>"fulfilled"===e.status?e.value:f);return{id:(0,i.zo)([...n,(0,u.eC)(p.id,{size:32}),h])}}throw(0,l.$)(a,{...t,account:T,chain:t.chain})}}},41709:function(e,t,a){a.d(t,{T:function(){return g}});var n=a(19775),r=a(65704),o=a(81544),s=a(63936),i=a(40402),c=a(93606),u=a(70878),l=a(92614),d=a(82645),h=a(82061),f=a(54605),w=a(12363),p=a(34467),m=a(9769);let v=new h.k(128);async function g(e,t){let{account:a=e.account,chain:h=e.chain,accessList:g,authorizationList:y,blobs:C,data:T,gas:b,gasPrice:E,maxFeePerBlobGas:_,maxFeePerGas:N,maxPriorityFeePerGas:R,nonce:x,type:I,value:q,...k}=t;if(void 0===a)throw new r.o({docsPath:"/docs/actions/wallet/sendTransaction"});let L=a?(0,n.T)(a):null;try{(0,f.F)(t);let a=await (async()=>t.to?t.to:null!==t.to&&y&&y.length>0?await (0,s.z)({authorization:y[0]}).catch(()=>{throw new o.G("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if(L?.type==="json-rpc"||null===L){let t;null!==h&&(t=await (0,d.s)(e,w.L,"getChainId")({}),(0,i.q)({currentChainId:t,chain:h}));let n=e.chain?.formatters?.transactionRequest?.format,r=(n||l.tG)({...(0,u.K)(k,{format:n}),accessList:g,account:L,authorizationList:y,blobs:C,chainId:t,data:T,gas:b,gasPrice:E,maxFeePerBlobGas:_,maxFeePerGas:N,maxPriorityFeePerGas:R,nonce:x,to:a,type:I,value:q},"sendTransaction"),o=v.get(e.uid);try{return await e.request({method:o?"wallet_sendTransaction":"eth_sendTransaction",params:[r]},{retryCount:0})}catch(t){if(!1===o)throw t;if("InvalidInputRpcError"===t.name||"InvalidParamsRpcError"===t.name||"MethodNotFoundRpcError"===t.name||"MethodNotSupportedRpcError"===t.name)return await e.request({method:"wallet_sendTransaction",params:[r]},{retryCount:0}).then(t=>(v.set(e.uid,!0),t)).catch(a=>{if("MethodNotFoundRpcError"===a.name||"MethodNotSupportedRpcError"===a.name)throw v.set(e.uid,!1),t;throw a});throw t}}if(L?.type==="local"){let t=await (0,d.s)(e,p.ZE,"prepareTransactionRequest")({account:L,accessList:g,authorizationList:y,blobs:C,chain:h,data:T,gas:b,gasPrice:E,maxFeePerBlobGas:_,maxFeePerGas:N,maxPriorityFeePerGas:R,nonce:x,nonceManager:L.nonceManager,parameters:[...p.QZ,"sidecars"],type:I,value:q,...k,to:a}),n=h?.serializers?.transaction,r=await L.signTransaction(t,{serializer:n});return await (0,d.s)(e,m.p,"sendRawTransaction")({serializedTransaction:r})}if(L?.type==="smart")throw new r.Y({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new r.Y({docsPath:"/docs/actions/wallet/sendTransaction",type:L?.type})}catch(e){if(e instanceof r.Y)throw e;throw(0,c.$)(e,{...t,account:L,chain:t.chain||void 0})}}},88027:function(e,t,a){a.d(t,{l:function(){return h}});var n=a(81544);class r extends n.G{constructor(e){super(`Call bundle failed with status: ${e.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=e}}var o=a(82645),s=a(36478),i=a(41495),c=a(56921),u=a(49287),l=a(31853),d=a(34557);async function h(e,t){let a;let{id:n,pollingInterval:h=e.pollingInterval,status:w=({statusCode:e})=>200===e||e>=300,retryCount:p=4,retryDelay:m=({count:e})=>200*~~(1<<e),timeout:v=6e4,throwOnFailure:g=!1}=t,y=(0,l.P)(["waitForCallsStatus",e.uid,n]),{promise:C,resolve:T,reject:b}=(0,c.n)(),E=(0,s.N7)(y,{resolve:T,reject:b},t=>{let s=(0,i.$)(async()=>{let i=e=>{clearTimeout(a),s(),e(),E()};try{let a=await (0,u.J)(async()=>{let t=await (0,o.s)(e,d.$,"getCallsStatus")({id:n});if(g&&"failure"===t.status)throw new r(t);return t},{retryCount:p,delay:m});if(!w(a))return;i(()=>t.resolve(a))}catch(e){i(()=>t.reject(e))}},{interval:h,emitOnBegin:!0});return s});return a=v?setTimeout(()=>{E(),clearTimeout(a),b(new f({id:n}))},v):void 0,await C}class f extends n.G{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}},40402:function(e,t,a){a.d(t,{q:function(){return r}});var n=a(35586);function r({chain:e,currentChainId:t}){if(!e)throw new n.Bk;if(t!==e.id)throw new n.Yl({chain:e,currentChainId:t})}}}]);